# FastAPI Clean Architecture

![Лицензия](https://img.shields.io/badge/license-Apache%202.0-blue.svg)

## Обзор

Этот репозиторий предоставляет шаблон чистой архитектуры для приложений на FastAPI. Основное внимание уделяется разделению обязанностей и масштабируемости, что упрощает сопровождение и расширение проектов.

## Особенности

- **FastAPI**: Высокая производительность, легкость в изучении и разработке.
- **Чистая архитектура**: Четкое разделение обязанностей для улучшения сопровождаемости кода.
- **Docker**: Контейнеризация для стабильной разработки и развертывания.
- **SQLAlchemy & Alembic**: ORM и миграции базы данных.
- **RabbitMQ**: Асинхронная передача сообщений.
- **Poetry**: Управление зависимостями.
- **GitHub Actions**: Настроенный CI/CD.

## Структура

##### `cmd`

- **Описание**: Точки входа для приложения.
- **Файлы**:
    - `main.py`: Главный файл для запуска приложения.
    - `worker.py`: Точка входа для фоновых задач.

##### `internal`

- **Описание**: Основная логика приложения.
- **Подкаталоги и файлы**:
    - `config`: Конфигурационные файлы и настройки.
        - `settings.py`: Конфигурации и переменные окружения.
    - `controller`: Контроллеры для обработки запросов.
        - `http`: Контроллеры для HTTP API.
            - `router.py`: Основные маршруты для HTTP API.
        - `amqp`: Контроллеры для обработки AMQP сообщений.
            - `router.py`: Маршруты для AMQP.
    - `entity`: Определения сущностей базы данных.
        - `application.py`: Модели для приложения.
    - `service`: Сервисы для обработки бизнес-логики.
        - `application.py`: Логика для сущностей приложения.
    - `usecase`: Варианты использования и бизнес-логика.
        - `utils`: Утилиты и вспомогательные функции.
            - `exception_handlers.py`: Обработчики исключений.
    - `dto`: Data Transfer Objects.
        - `application.py`: DTO для приложения.

##### `pkg`

- **Описание**: Общие пакеты и библиотеки.
- **Подкаталоги и файлы**:
    - `rabbitmq`: Вспомогательные модули для работы с RabbitMQ.
        - `rpc`: Реализация RPC на основе RabbitMQ.
            - `client.py`: Клиент для RPC.
            - `server.py`: Сервер для RPC.
            - `routing.py`: Маршрутизация RPC запросов.

##### `tests` (планируется)

- **Описание**: Юнит и интеграционные тесты.
- **Подкаталоги и файлы**:
    - `unit`: Юнит-тесты для отдельных компонентов.
    - `integration`: Интеграционные тесты для проверки взаимодействия компонентов.

## Начало работы

### Предварительные требования

- Docker
- Docker Compose

### Установка

1. Клонируйте репозиторий:
    ```sh
    git clone https://github.com/1nikitas/fastapi-clean-architecture-backend-with-rbmq.git
    cd fastapi-clean-architecture
    ```

2. Настройте переменные окружения:
    ```sh
    cp .env.example .env
    ```

3. Соберите и запустите приложение:
    ```sh
    docker-compose up --build
    ```

### Запуск тестов

Для запуска тестов выполните:
```sh
docker-compose exec app pytest
```

### TODO:
1. Добавить комментарии
